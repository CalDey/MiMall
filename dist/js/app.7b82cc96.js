(function(t){function e(e){for(var s,i,c=e[0],o=e[1],l=e[2],d=0,u=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);v&&v(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},r={app:0},n=[];function c(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-31ed31e6":"bd23d6e6","chunk-983dd1da":"0a185688","chunk-c0ee4194":"55b14475"}[t]+".js"}function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a={"chunk-31ed31e6":1,"chunk-983dd1da":1,"chunk-c0ee4194":1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=new Promise((function(e,a){for(var s="css/"+({}[t]||t)+"."+{"chunk-31ed31e6":"662a1836","chunk-983dd1da":"94d6b391","chunk-c0ee4194":"4a5dd280"}[t]+".css",r=o.p+s,n=document.getElementsByTagName("link"),c=0;c<n.length;c++){var l=n[c],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===s||d===r))return e()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){l=u[c],d=l.getAttribute("data-href");if(d===s||d===r)return e()}var v=document.createElement("link");v.rel="stylesheet",v.type="text/css",v.onload=e,v.onerror=function(e){var s=e&&e.target&&e.target.src||r,n=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=s,delete i[t],v.parentNode.removeChild(v),a(n)},v.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(v)})).then((function(){i[t]=0})));var s=r[t];if(0!==s)if(s)e.push(s[2]);else{var n=new Promise((function(e,a){s=r[t]=[e,a]}));e.push(s[2]=n);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,o.nc&&d.setAttribute("nonce",o.nc),d.src=c(t);var u=new Error;l=function(e){d.onerror=d.onload=null,clearTimeout(v);var a=r[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",u.name="ChunkLoadError",u.type=s,u.request=i,a[1](u)}r[t]=void 0}};var v=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(e)},o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var v=d;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0025":function(t,e,a){},"072c":function(t,e,a){"use strict";a("e96f")},"122d":function(t,e,a){},1255:function(t,e,a){"use strict";a("51eb")},1266:function(t,e,a){},2441:function(t,e,a){},"30db":function(t,e,a){"use strict";a("0025")},3924:function(t,e,a){"use strict";a("122d")},"4a39":function(t,e,a){"use strict";a("e00f")},"511f":function(t,e,a){},"51eb":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("0fb7"),a("450d");var s,i=a("f529"),r=a.n(i),n=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("d3b7"),a("b0c0"),a("2b0e")),c=a("8c4f"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-header"),a("router-view"),a("nav-footer")],1)},l=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"nav-topbar"},[a("div",{staticClass:"container"},[t._m(0),a("div",{staticClass:"topbar-user"},[t.username?a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.username))]):t._e(),t.username?t._e():a("a",{attrs:{href:"javascript:;"},on:{click:t.login}},[t._v("登录")]),t.username?a("a",{attrs:{href:"javascript:;"},on:{click:t.logout}},[t._v("退出")]):t._e(),a("a",{attrs:{href:"javascript:;"}},[t._v("我的订单")]),a("a",{staticClass:"my-cart",attrs:{href:"javascript:;"},on:{click:t.goToCart}},[a("span",{staticClass:"icon-cart"}),t._v(" 购物车("+t._s(t.cartCount)+") ")])])])]),a("div",{staticClass:"nav-header"},[a("div",{staticClass:"container"},[t._m(1),a("div",{staticClass:"header-menu"},[a("div",{staticClass:"item-menu"},[a("span",[t._v("小米手机")]),a("div",{staticClass:"children"},[a("ul",t._l(t.phoneList,(function(e,s){return a("li",{key:s,staticClass:"product"},[a("a",{attrs:{href:"/#/product/"+e.id,target:"_blink"}},[a("div",{staticClass:"pro-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.mainImage,expression:"item.mainImage"}],attrs:{alt:e.subtitle}})]),a("div",{staticClass:"pro-name"},[t._v(t._s(e.name))]),a("div",{staticClass:"pro-price"},[t._v(t._s(t._f("currency")(e.price)))])])])})),0)])]),t._m(2),a("div",{staticClass:"item-menu"},[a("span",[t._v("电视")]),a("div",{staticClass:"children"},[a("ul",[a("li",{staticClass:"product"},[a("a",{attrs:{href:"",target:"_blink"}},[a("div",{staticClass:"pro-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/imgs/nav-img/nav-3-1.jpg",expression:"'/imgs/nav-img/nav-3-1.jpg'"}],attrs:{alt:""}})]),a("div",{staticClass:"pro-name"},[t._v("小米壁画电视 65英寸")]),a("div",{staticClass:"pro-price"},[t._v("6999元")])])]),a("li",{staticClass:"product"},[a("a",{attrs:{href:"",target:"_blink"}},[a("div",{staticClass:"pro-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/imgs/nav-img/nav-3-2.jpg",expression:"'/imgs/nav-img/nav-3-2.jpg'"}],attrs:{alt:""}})]),a("div",{staticClass:"pro-name"},[t._v("小米全面屏电视电视 E55A")]),a("div",{staticClass:"pro-price"},[t._v("1999元")])])]),a("li",{staticClass:"product"},[a("a",{attrs:{href:"",target:"_blink"}},[a("div",{staticClass:"pro-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/imgs/nav-img/nav-3-3.png",expression:"'/imgs/nav-img/nav-3-3.png'"}],attrs:{alt:""}})]),a("div",{staticClass:"pro-name"},[t._v("小米电视4A 32英寸")]),a("div",{staticClass:"pro-price"},[t._v("699元")])])]),a("li",{staticClass:"product"},[a("a",{attrs:{href:"",target:"_blink"}},[a("div",{staticClass:"pro-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/imgs/nav-img/nav-3-4.jpg",expression:"'/imgs/nav-img/nav-3-4.jpg'"}],attrs:{alt:""}})]),a("div",{staticClass:"pro-name"},[t._v("小米电视5A 55英寸")]),a("div",{staticClass:"pro-price"},[t._v("1799元")])])]),a("li",{staticClass:"product"},[a("a",{attrs:{href:"",target:"_blink"}},[a("div",{staticClass:"pro-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/imgs/nav-img/nav-3-5.jpg",expression:"'/imgs/nav-img/nav-3-5.jpg'"}],attrs:{alt:""}})]),a("div",{staticClass:"pro-name"},[t._v("小米电视4A 65英寸")]),a("div",{staticClass:"pro-price"},[t._v("2699元")])])]),a("li",{staticClass:"product"},[a("a",{attrs:{href:"",target:"_blink"}},[a("div",{staticClass:"pro-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/imgs/nav-img/nav-3-6.png",expression:"'/imgs/nav-img/nav-3-6.png'"}],attrs:{alt:""}})]),a("div",{staticClass:"pro-name"},[t._v("查看全部")]),a("div",{staticClass:"pro-price"},[t._v("查看全部")])])])])])])]),t._m(3)])])])},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topbar-menu"},[a("a",{attrs:{href:"javascript:;"}},[t._v("小米商城")]),a("a",{attrs:{href:"javascript:;"}},[t._v("MUI")]),a("a",{attrs:{href:"javascript:;"}},[t._v("云服务")]),a("a",{attrs:{href:"javascript:;"}},[t._v("协议规则")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-logo"},[a("a",{attrs:{href:"/#/index"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-menu"},[a("span",[t._v("RedMi红米")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-search"},[a("div",{staticClass:"wrapper"},[a("input",{attrs:{type:"text",name:"keyword"}}),a("a",{attrs:{href:"javascript:;"}})])])}],v=a("5530"),p=(a("b680"),a("2f62")),m={name:"nav-header",data:function(){return{phoneList:[]}},computed:Object(v["a"])({},Object(p["c"])(["username","cartCount"])),filters:{currency:function(t){return t?"￥"+t.toFixed(2)+"元":"0.00"}},mounted:function(){this.getProductList();var t=this.$route.params;t&&"login"===t.from&&this.getCartCount()},methods:{login:function(){this.$router.push("/login")},getCartCount:function(){var t=this;this.axios.get("/carts/products/sum").then((function(e){t.$store.dispatch("saveCartCount",e)}))},logout:function(){var t=this;this.axios.post("/user/logout").then((function(){t.$message.success("退出成功"),t.$cookie.set("userId","",{expires:"-1"}),t.$store.dispatch("saveUserName",""),t.$store.dispatch("saveCartCount","0")}))},getProductList:function(){var t=this;this.axios.get("/products",{params:{categoryId:"100012",pageSize:6}}).then((function(e){t.phoneList=e.list}))},goToCart:function(){this.$router.push("/cart")}}},h=m,f=(a("8ee7"),a("2877")),_=Object(f["a"])(h,d,u,!1,null,null,null),g=_.exports,C=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer"},[a("div",{staticClass:"footer-logo"},[a("img",{attrs:{src:"/imgs/logo-footer.png",alt:""}}),a("p",[t._v("小米商城")])]),a("div",{staticClass:"footer-link"},[a("a",{attrs:{href:""}},[t._v("CalDey的主页")]),a("span"),a("a",{attrs:{href:""}},[t._v("CalDey的博客")]),a("span"),a("a",{attrs:{href:""}},[t._v("CalDey的Github")]),a("span"),a("a",{attrs:{href:""}},[t._v("Vue全家桶实现小米商城")]),a("span")]),a("div",{staticClass:"copyright"},[t._v("Copyright ©2021 "),a("span",{staticClass:"domain"},[t._v("mi.futurefe.com")]),t._v(" All Rights Reserved.")])])}],b={name:"nav-footer"},x=b,w=(a("fad4"),Object(f["a"])(x,C,y,!1,null,"bcc262f0",null)),k=w.exports,j={name:"nav-home",components:{NavHeader:g,NavFooter:k}},I=j,$=Object(f["a"])(I,o,l,!1,null,null,null),M=$.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index"},[a("div",{staticClass:"container"},[a("div",{staticClass:"swiper-box"},[a("div",{staticClass:"nav-menu"},[a("ul",{staticClass:"menu-wrap"},[a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"javascript:;"}},[t._v("手机 电话卡")]),a("div",{staticClass:"children"},t._l(t.menuList,(function(e,s){return a("ul",{key:s},t._l(e,(function(e,s){return a("li",{key:s},[a("a",{attrs:{href:e?"/#?product/"+e.id:""}},[a("img",{attrs:{src:e?e.img:"/imgs/item-box-1.png",alt:""}}),t._v(" "+t._s(e?e.name:"小米9")+" ")])])})),0)})),0)]),t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6)])]),a("swiper",{attrs:{options:t.swiperOption}},[t._l(t.slideList,(function(t,e){return a("swiper-slide",{key:e},[a("a",{attrs:{href:"/#/product/"+t.id}},[a("img",{attrs:{src:t.img,alt:""}})])])})),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"}),a("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),a("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})],2)],1),a("div",{staticClass:"ads-box"},t._l(t.adsList,(function(t){return a("a",{key:t.id,attrs:{href:"/#/product/"+t.id}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.img,expression:"item.img"}],attrs:{alt:""}})])})),0),a("div",{staticClass:"banner"},[a("a",{attrs:{href:"/#/product/30"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/imgs/banner-1.png",expression:"'/imgs/banner-1.png'"}],attrs:{alt:""}})])])]),a("div",{staticClass:"product-box"},[a("div",{staticClass:"container"},[a("h2",[t._v("手机")]),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"banner-left"},[a("a",{attrs:{href:"/#/product/35"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/imgs/mix-alpha.jpg",expression:"'/imgs/mix-alpha.jpg'"}],attrs:{alt:""}})])]),a("div",{staticClass:"list-box"},t._l(t.phoneList,(function(e,s){return a("div",{key:s,staticClass:"list"},t._l(e,(function(e,s){return a("div",{key:s,staticClass:"item"},[a("span",{class:{"kill-pro":s%2==0}},[t._v("秒杀")]),a("div",{staticClass:"item-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.mainImage,expression:"item.mainImage"}],attrs:{alt:""}})]),a("div",{staticClass:"item-info"},[a("h3",[t._v(t._s(e.name))]),a("p",[t._v(t._s(e.subtitle))]),a("p",{staticClass:"price",on:{click:function(a){return t.addCart(e.id)}}},[t._v(t._s(e.price)+"元")])])])})),0)})),0)])])]),a("service-bar"),a("modal",{attrs:{title:"提示",sureText:"查看购物车",btnType:"1",modalType:"middle",showModal:t.showModal},on:{submit:t.goToCart,cancel:function(e){t.showModal=!1}},scopedSlots:t._u([{key:"body",fn:function(){return[a("p",[t._v("商品添加成功！")])]},proxy:!0}])})],1)},S=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"javascript:;"}},[t._v("电视 盒子")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"javascript:;"}},[t._v("笔记本 平板")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"javascript:;"}},[t._v("家电 插线板")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"javascript:;"}},[t._v("出行 穿戴")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"javascript:;"}},[t._v("智能 路由器")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"javascript:;"}},[t._v("电脑 配件")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"menu-item"},[a("a",{attrs:{href:"javascript:;"}},[t._v("生活 箱包")])])}],T=(a("fb6a"),a("984c")),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"modal"},[a("div",{staticClass:"mask"}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-header"},[a("span",[t._v(t._s(t.title))]),a("a",{staticClass:"icon-close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("cancel")}}})]),a("div",{staticClass:"modal-body"},[t._t("body")],2),a("div",{staticClass:"modal-footer"},[1==t.btnType?a("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("submit")}}},[t._v(t._s(t.sureText))]):t._e(),2==t.btnType?a("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(t._s(t.cancelText))]):t._e(),3==t.btnType?a("div",{staticClass:"btn-group"},[a("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("submit")}}},[t._v(t._s(t.sureText))]),a("a",{staticClass:"btn btn-default",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(t._s(t.cancelText))])]):t._e()])])])])},P=[],O={name:"modal",props:{modalType:{type:String,default:"form"},title:String,btnType:String,sureText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},showModal:Boolean}},z=O,A=(a("30db"),Object(f["a"])(z,E,P,!1,null,null,null)),L=A.exports,D=a("7212"),q=(a("dfa4"),{name:"index",components:{swiper:D["swiper"],swiperSlide:D["swiperSlide"],ServiceBar:T["a"],Modal:L},data:function(){return{swiperOption:{autoplay:!0,loop:!0,effect:"cube",cubeEffect:{shadowOffset:100,shadowScale:.6},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},slideList:[{id:"42",img:"/imgs/slider/slide-1.jpg"},{id:"45",img:"/imgs/slider/slide-2.jpg"},{id:"46",img:"/imgs/slider/slide-3.jpg"},{id:"42",img:"/imgs/slider/slide-4.jpg"},{id:"42",img:"/imgs/slider/slide-5.jpg"}],menuList:[[{id:30,img:"/imgs/item-box-1.png",name:"小米CC9"},{id:31,img:"/imgs/item-box-2.png",name:"小米8青春版"},{id:32,img:"/imgs/item-box-3.jpg",name:"Redmi K20 Pro"},{id:30,img:"/imgs/item-box-4.jpg",name:"移动4G专区"}],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],adsList:[{id:33,img:"/imgs/ads/ads-1.png"},{id:48,img:"/imgs/ads/ads-2.jpg"},{id:45,img:"/imgs/ads/ads-3.png"},{id:47,img:"/imgs/ads/ads-4.jpg"}],phoneList:[],showModal:!1}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.axios.get("/products",{params:{categoryId:100012,pageSize:14}}).then((function(e){e.list=e.list.slice(6,14),t.phoneList=[e.list.slice(0,4),e.list.slice(4,8)]}))},addCart:function(t){var e=this;this.showModal=!0,this.axios.post("/carts",{productId:t,selected:!0}).then((function(t){e.showModal=!0,e.$store.dispatch("saveCartCount",t.cartTotalQuantity)})).catch((function(){e.showModal=!0}))},goToCart:function(){this.$router.push("/cart")}}}),U=q,B=(a("e24c"),Object(f["a"])(U,N,S,!1,null,"3f983fb0",null)),V=B.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart"},[a("order-header",{attrs:{title:"我的购物车"},scopedSlots:t._u([{key:"tip",fn:function(){return[a("span",[t._v("温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算")])]},proxy:!0}])}),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"container"},[a("div",{staticClass:"cart-box"},[a("ul",{staticClass:"cart-item-head"},[a("li",{staticClass:"col-1"},[a("span",{staticClass:"checkbox",class:{checked:t.allChecked},on:{click:t.toggleAll}}),t._v("全选")]),a("li",{staticClass:"col-3"},[t._v("商品名称")]),a("li",{staticClass:"col-1"},[t._v("单价")]),a("li",{staticClass:"col-2"},[t._v("数量")]),a("li",{staticClass:"col-1"},[t._v("小计")]),a("li",{staticClass:"col-1"},[t._v("操作")])]),a("ul",{staticClass:"cart-item-list"},t._l(t.list,(function(e,s){return a("li",{key:s,staticClass:"cart-item"},[a("div",{staticClass:"item-check"},[a("span",{staticClass:"checkbox",class:{checked:e.productSelected},on:{click:function(a){return t.updateCart(e)}}})]),a("div",{staticClass:"item-name"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productMainImage,expression:"item.productMainImage"}]}),a("span",[t._v(t._s(e.productName+" , "+e.productSubtitle))])]),a("div",{staticClass:"item-price"},[t._v(t._s(e.productPrice))]),a("div",{staticClass:"item-num"},[a("div",{staticClass:"num-box"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.updateCart(e,"-")}}},[t._v("-")]),a("span",[t._v(t._s(e.quantity))]),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.updateCart(e,"+")}}},[t._v("+")])])]),a("div",{staticClass:"item-total"},[t._v(t._s(e.productTotalPrice))]),a("div",{staticClass:"item-del",on:{click:function(a){return t.confirmDel(e)}}})])})),0)]),a("div",{staticClass:"order-wrap clearfix"},[a("div",{staticClass:"cart-tip fl"},[a("a",{attrs:{href:"/#/index"}},[t._v("继续购物")]),t._v(" 共"),a("span",[t._v(t._s(t.list.length))]),t._v("件商品，已选择"),a("span",[t._v(t._s(t.checkedNum))]),t._v("件 ")]),a("div",{staticClass:"total fr"},[t._v(" 合计："),a("span",[t._v(t._s(t.cartTotalPrice))]),t._v("元 "),a("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:t.order}},[t._v("去结算")])])])])]),a("service-bar"),a("modal",{attrs:{title:"提示",sureText:"确定",btnType:"3",modalType:"middle",showModal:t.showModal},on:{submit:function(e){return t.delProduct()},cancel:function(e){t.showModal=!1}},scopedSlots:t._u([{key:"body",fn:function(){return[a("p",[t._v("是否移除该商品？")])]},proxy:!0}])}),a("nav-footer")],1)},R=[],Z=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-header"},[a("div",{staticClass:"container clearfix"},[t._m(0),a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.title)),t._t("tip")],2)]),a("div",{staticClass:"username"},[a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.username))])])])])}),F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-logo"},[a("a",{attrs:{href:"/#/index"}})])}],J={name:"order-header",props:{title:String},computed:Object(v["a"])({},Object(p["c"])(["username"]))},G=J,K=(a("6b4a"),Object(f["a"])(G,Z,F,!1,null,null,null)),Q=K.exports,X={name:"index",components:{OrderHeader:Q,ServiceBar:T["a"],NavFooter:k,Modal:L},data:function(){return{list:[],allChecked:!1,cartTotalPrice:0,checkedNum:0,showModal:!1,itemData:{}}},mounted:function(){this.getCartList()},methods:{getCartList:function(){var t=this;this.axios.get("/carts").then((function(e){t.renderData(e)}))},updateCart:function(t,e){var a=this,s=t.quantity,i=t.productSelected;if("-"==e){if(1==s)return void this.$message.warning("至少保留一件商品");--s}else if("+"==e){if(s>=t.productStock)return void this.$message.warning("购买商品数量不能超过商品库存数量");s++}else i=!t.productSelected;this.axios.put("/carts/".concat(t.productId),{quantity:s,selected:i}).then((function(t){a.renderData(t)}))},confirmDel:function(t){this.showModal=!0,this.itemData=t,console.log(this.itemData)},delProduct:function(){var t=this;this.axios.delete("/carts/".concat(this.itemData.productId)).then((function(e){t.itemData={},t.renderData(e),t.showModal=!1,t.$message.success("删除成功")}))},toggleAll:function(){var t=this,e=this.allChecked?"/carts/unSelectAll":"/carts/selectAll";this.axios.put(e).then((function(e){t.renderData(e)}))},renderData:function(t){this.list=t.cartProductVoList||[],this.allChecked=t.selectedAll,this.cartTotalPrice=t.cartTotalPrice,this.checkedNum=this.list.filter((function(t){return t.productSelected})).length},order:function(){var t=this.list.every((function(t){return!t.productSelected}));t?this.$message.warning("请选择至少一件商品"):this.$router.push("/order/confirm")}}},W=X,Y=(a("3924"),Object(f["a"])(W,H,R,!1,null,null,null)),tt=Y.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view"),a("service-bar"),a("nav-footer")],1)},at=[],st={name:"order",data:function(){return{title:"",tip:""}},components:{ServiceBar:T["a"],NavFooter:k},mounted:function(){var t=this.$route.path;"/order/confirm"==t?(this.title="订单确认",this.tip="请认真填写收货地址"):"/order/list"==t?(this.title="订单列表",this.tip="请谨防钓鱼链接诈骗电话"):(this.title="订单支付",this.tip="请谨防钓鱼链接诈骗电话")}},it=st,rt=Object(f["a"])(it,et,at,!1,null,null,null),nt=rt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-list"},[a("order-header",{attrs:{title:"订单列表"},scopedSlots:t._u([{key:"tip",fn:function(){return[a("span",[t._v("请谨防钓鱼链接或诈骗电话")])]},proxy:!0}])}),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"container"},[a("div",{staticClass:"order-box"},[t.loading?a("loading"):t._e(),t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"order"},[a("div",{staticClass:"order-title"},[a("div",{staticClass:"item-info fl"},[t._v(" "+t._s(e.createTime)+" "),a("span",[t._v("|")]),t._v(" "+t._s(e.receiverName)+" "),a("span",[t._v("|")]),t._v(" 订单号："+t._s(e.orderNo)+" "),a("span",[t._v("|")]),t._v(" "+t._s(e.paymentTypeDesc)+" ")]),a("div",{staticClass:"item-money fr"},[a("span",[t._v("应付金额：")]),a("span",{staticClass:"money"},[t._v(t._s(e.payment))]),a("span",[t._v("元")])])]),a("div",{staticClass:"order-content clearfix"},[a("div",{staticClass:"good-box fl"},t._l(e.orderItemVoList,(function(e,s){return a("div",{key:s,staticClass:"good-list"},[a("div",{staticClass:"good-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productImage,expression:"item.productImage"}],attrs:{alt:""}})]),a("div",{staticClass:"good-name"},[a("div",{staticClass:"p-name"},[t._v(t._s(e.productName))]),a("div",{staticClass:"p-money"},[t._v(t._s(e.totalPrice+"X"+e.quantity)+"元")])])])})),0),20==e.status?a("div",{staticClass:"good-state fr"},[a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(e.statusDesc))])]):a("div",{staticClass:"good-state fr"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.goPay(e.orderNo)}}},[t._v(t._s(e.statusDesc))])])])])})),a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",pageSize:t.pageSize,total:t.total},on:{"current-change":t.handleChange}}),t.loading||0!=t.list.length?t._e():a("no-data")],2)])])],1)},ot=[],lt=a("ade3"),dt=(a("1951"),a("eedf")),ut=a.n(dt),vt=(a("672e"),a("101e")),pt=a.n(vt),mt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading"},[a("img",{attrs:{src:"/imgs/loading-svg/loading-bars.svg",alt:""}})])}],ft={name:"loading"},_t=ft,gt=(a("cb13"),Object(f["a"])(_t,mt,ht,!1,null,null,null)),Ct=gt.exports,yt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},bt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-data"},[a("img",{attrs:{src:"/imgs/icon-no-data.png",alt:""}}),a("p",[t._v("当前暂无订单记录")])])}],xt={name:"no-data"},wt=xt,kt=(a("eaee"),Object(f["a"])(wt,yt,bt,!1,null,null,null)),jt=kt.exports,It={name:"order-list",components:(s={OrderHeader:Q,Loading:Ct,NoData:jt},Object(lt["a"])(s,pt.a.name,pt.a),Object(lt["a"])(s,ut.a.name,ut.a),s),data:function(){return{loading:!1,list:[],pageSize:10,pageNum:1,total:0}},mounted:function(){this.getOrderList()},methods:{getOrderList:function(){var t=this;this.loading=!0,this.axios.get("/orders",{params:{pageSize:10,pageNum:this.pageNum}}).then((function(e){t.loading=!1,t.list=e.list,t.total=e.total})).catch((function(){t.loading=!1}))},goPay:function(t){this.$router.push({path:"/order/pay",query:{orderId:t}})},handleChange:function(t){this.pageNum=t,this.getOrderList()}}},$t=It,Mt=(a("778c"),Object(f["a"])($t,ct,ot,!1,null,null,null)),Nt=Mt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-confirm"},[a("order-header",{attrs:{title:"订单确认"},scopedSlots:t._u([{key:"tip",fn:function(){return[a("span",[t._v("请认真填写收货地址")])]},proxy:!0}])}),a("svg",{staticStyle:{position:"absolute",width:"0px",height:"0px",overflow:"hidden"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("defs",[a("symbol",{attrs:{id:"icon-add",viewBox:"0 0 31 32"}},[a("title",[t._v("add")]),a("path",{staticClass:"path1",attrs:{d:"M30.745 15.152h-14.382v-14.596c0-0.308-0.243-0.557-0.543-0.557s-0.543 0.249-0.543 0.557v14.596h-14.665c-0.3 0-0.543 0.249-0.543 0.557s0.243 0.557 0.543 0.557h14.665v15.177c0 0.307 0.243 0.557 0.543 0.557s0.543-0.249 0.543-0.557v-15.177h14.382c0.3 0 0.543-0.249 0.543-0.557s-0.243-0.557-0.543-0.557z"}})]),a("symbol",{attrs:{id:"icon-edit",viewBox:"0 0 32 32"}},[a("title",[t._v("edit")]),a("path",{staticClass:"path1",attrs:{d:"M28.287 8.51l-4.805-4.806 0.831-0.831c0.472-0.472 1.086-0.777 1.564-0.777 0.248 0 0.452 0.082 0.622 0.253l3.143 3.144c0.539 0.54 0.133 1.529-0.524 2.186l-0.831 0.831zM26.805 9.992l-1.138 1.138-4.805-4.806 1.138-1.138 4.805 4.806zM24.186 12.612l-14.758 14.762-4.805-4.806 14.758-14.762 4.805 4.806zM7.379 28.288l-4.892 1.224 1.223-4.894 3.669 3.67zM31.123 4.011l-3.143-3.144c-0.567-0.567-1.294-0.867-2.103-0.867-1.036 0-2.174 0.52-3.045 1.391l-20.429 20.436c-0.135 0.134-0.23 0.302-0.276 0.487l-2.095 8.385c-0.089 0.355 0.017 0.736 0.276 0.995 0.198 0.198 0.461 0.307 0.741 0.307 0.085 0 0.171-0.010 0.254-0.031l8.381-2.096c0.185-0.047 0.354-0.142 0.487-0.276l20.43-20.436c1.409-1.41 2.042-3.632 0.524-5.15v0z"}})]),a("symbol",{attrs:{id:"icon-del",viewBox:"0 0 32 32"}},[a("title",[t._v("delete")]),a("path",{staticClass:"path1",attrs:{d:"M11.355 4.129v-2.065h9.29v2.065h-9.29zM6.194 29.935v-23.742h19.613v23.742h-19.613zM30.968 4.129h-8.258v-3.097c0-0.569-0.463-1.032-1.032-1.032h-11.355c-0.569 0-1.032 0.463-1.032 1.032v3.097h-8.258c-0.569 0-1.032 0.463-1.032 1.032s0.463 1.032 1.032 1.032h3.097v24.774c0 0.569 0.463 1.032 1.032 1.032h21.677c0.569 0 1.032-0.463 1.032-1.032v-24.774h3.097c0.569 0 1.032-0.463 1.032-1.032s-0.463-1.032-1.032-1.032v0z"}}),a("path",{staticClass:"path2",attrs:{d:"M10.323 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),a("path",{staticClass:"path3",attrs:{d:"M16 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),a("path",{staticClass:"path4",attrs:{d:"M21.677 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}})])])]),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"container"},[a("div",{staticClass:"order-box"},[a("div",{staticClass:"item-address"},[a("h2",{staticClass:"addr-title"},[t._v("收货地址")]),a("div",{staticClass:"addr-list clearfix"},[t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"addr-info",class:{checked:s==t.checkIndex},on:{click:function(e){t.checkIndex=s}}},[a("h2",[t._v(t._s(e.receiverName))]),a("div",{staticClass:"phone"},[t._v(t._s(e.receiverMobile))]),a("div",{staticClass:"street"},[t._v(t._s(e.receiverProvince+" "+e.receiverCity+" "+e.receiverDistrict+" "+e.receiverAddress))]),a("div",{staticClass:"action"},[a("a",{staticClass:"fl",attrs:{href:"javascript:;"},on:{click:function(a){return t.delAddress(e)}}},[a("svg",{staticClass:"icon icon-del"},[a("use",{attrs:{"xlink:href":"#icon-del"}})])]),a("a",{staticClass:"fr",attrs:{href:"javascript:;"},on:{click:function(a){return t.editAddressModal(e)}}},[a("svg",{staticClass:"icon icon-edit"},[a("use",{attrs:{"xlink:href":"#icon-edit"}})])])])])})),a("div",{staticClass:"addr-add",on:{click:t.openAddressModal}},[a("div",{staticClass:"icon-add"}),a("div",[t._v("添加新地址")])])],2)]),a("div",{staticClass:"item-good"},[a("h2",[t._v("商品")]),a("ul",t._l(t.cartList,(function(e,s){return a("li",{key:s},[a("div",{staticClass:"good-name"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productMainImage,expression:"item.productMainImage"}],attrs:{alt:""}}),a("span",[t._v(t._s(e.productName+" "+e.productSubtitle))])]),a("div",{staticClass:"good-price"},[t._v(t._s(e.productPrice)+"元x"+t._s(e.quantity))]),a("div",{staticClass:"good-total"},[t._v(t._s(e.productTotalPrice)+"元")])])})),0)]),t._m(0),t._m(1),a("div",{staticClass:"detail"},[a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[t._v("商品件数：")]),a("span",{staticClass:"item-val"},[t._v(t._s(t.count)+"件")])]),a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[t._v("商品总价：")]),a("span",{staticClass:"item-val"},[t._v(t._s(t.cartTotalPrice)+"元")])]),t._m(2),t._m(3),a("div",{staticClass:"item-total"},[a("span",{staticClass:"item-name"},[t._v("应付总额：")]),a("span",{staticClass:"item-val"},[t._v(t._s(t.cartTotalPrice)+"元")])])]),a("div",{staticClass:"btn-group"},[a("a",{staticClass:"btn btn-default btn-large",attrs:{href:"/#/cart"}},[t._v("返回购物车")]),a("a",{staticClass:"btn btn-large",attrs:{href:"javascript:;"},on:{click:t.orderSubmit}},[t._v("去结算")])])])])]),a("modal",{attrs:{title:"新增地址",btnType:"1",showModal:t.showEditModal},on:{cancel:function(e){t.showEditModal=!1},submit:t.submitAddress},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"edit-wrap"},[a("div",{staticClass:"item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverName,expression:"checkedItem.receiverName"}],staticClass:"input",attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.checkedItem.receiverName},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverName",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],staticClass:"input",attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.checkedItem.receiverMobile},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverMobile",e.target.value)}}})]),a("div",{staticClass:"item"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverProvince,expression:"checkedItem.receiverProvince"}],attrs:{name:"province"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverProvince",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"北京"}},[t._v("北京市")]),a("option",{attrs:{value:"河北"}},[t._v("河北省")]),a("option",{attrs:{value:"湖北"}},[t._v("湖北省")]),a("option",{attrs:{value:"湖南"}},[t._v("湖南省")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverCity,expression:"checkedItem.receiverCity"}],attrs:{name:"city"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverCity",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"北京"}},[t._v("北京市")]),a("option",{attrs:{value:"石家庄"}},[t._v("石家庄市")]),a("option",{attrs:{value:"武汉"}},[t._v("武汉市")]),a("option",{attrs:{value:"长沙"}},[t._v("长沙市")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverDistrict,expression:"checkedItem.receiverDistrict"}],attrs:{name:"district"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverDistrict",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"朝阳"}},[t._v("朝阳区")]),a("option",{attrs:{value:"东城"}},[t._v("东城区")]),a("option",{attrs:{value:"西城"}},[t._v("西城区")]),a("option",{attrs:{value:"海淀"}},[t._v("海淀区")]),a("option",{attrs:{value:"顺义"}},[t._v("顺义区")])])]),a("div",{staticClass:"item"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],attrs:{name:"street"},domProps:{value:t.checkedItem.receiverAddress},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverAddress",e.target.value)}}})]),a("div",{staticClass:"item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverZip,expression:"checkedItem.receiverZip"}],staticClass:"input",attrs:{type:"text",placeholder:"邮编"},domProps:{value:t.checkedItem.receiverZip},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverZip",e.target.value)}}})])])]},proxy:!0}])}),a("modal",{attrs:{title:"删除确认",btnType:"1",showModal:t.showDelModal},on:{cancel:function(e){t.showDelModal=!1},submit:t.submitAddress},scopedSlots:t._u([{key:"body",fn:function(){return[a("p",[t._v("您确认要删除此地址吗？")])]},proxy:!0}])})],1)},Tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-shipping"},[a("h2",[t._v("配送方式")]),a("span",[t._v("包邮")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-invoice"},[a("h2",[t._v("发票")]),a("a",{attrs:{href:"javascript:;"}},[t._v("电子发票")]),a("a",{attrs:{href:"javascript:;"}},[t._v("个人")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[t._v("优惠活动：")]),a("span",{staticClass:"item-val"},[t._v("0元")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[t._v("运费：")]),a("span",{staticClass:"item-val"},[t._v("0元")])])}],Et=(a("d81d"),{name:"order-confirm",data:function(){return{list:[],cartList:[],cartTotalPrice:0,count:0,checkedItem:{},userAction:"",showDelModal:!1,showEditModal:!1,checkIndex:0}},components:{Modal:L,OrderHeader:Q},mounted:function(){this.getAddressList(),this.getCartList()},methods:{getAddressList:function(){var t=this;this.axios.get("/shippings").then((function(e){t.list=e.list}))},openAddressModal:function(){this.userAction=0,this.checkedItem={},this.showEditModal=!0},editAddressModal:function(t){this.checkedItem=JSON.parse(JSON.stringify(t)),this.userAction=1,this.showEditModal=!0},delAddress:function(t){this.checkedItem=t,this.userAction=2,this.showDelModal=!0},submitAddress:function(){var t,e,a=this,s=this.checkedItem,i=this.userAction,r={};if(0==i?(t="post",e="/shippings"):1==i?(t="put",e="/shippings/".concat(s.id)):(t="delete",e="/shippings/".concat(s.id)),0==i||1==i){var n=s.receiverName,c=s.receiverMobile,o=s.receiverProvince,l=s.receiverCity,d=s.receiverDistrict,u=s.receiverAddress,v=s.receiverZip,p="";if(n?c&&/\d{11}/.test(c)?o?l?d&&u?v&&/\d{6}/.test(v)||(p="请输入正确格式的邮政编号"):p="请输入收货地址":p="请选择对应城市":p="请选择省份":p="请输入正确格式的手机号":p="请输入收货人名称",p)return void this.$message.error(p);r={receiverName:n,receiverMobile:c,receiverProvince:o,receiverCity:l,receiverDistrict:d,receiverAddress:u,receiverZip:v}}this.axios[t](e,r).then((function(){a.closeModal(),a.getAddressList(),a.$message.success("操作成功")}))},closeModal:function(){this.checkedItem="",this.userAction="",this.showDelModal=!1,this.showEditModal=!1},getCartList:function(){var t=this;this.axios.get("/carts").then((function(e){var a=e.cartProductVoList;t.cartTotalPrice=e.cartTotalPrice,t.cartList=a.filter((function(t){return t.productSelected})),t.cartList.map((function(e){t.count+=e.quantity}))}))},orderSubmit:function(){var t=this,e=this.list[this.checkIndex];e?this.axios.post("/orders",{shippingId:e.id}).then((function(e){t.$router.push({path:"/order/pay",query:{orderId:e.orderNo}})})):this.$message.error("请选择一个收货地址")}}}),Pt=Et,Ot=(a("1255"),Object(f["a"])(Pt,St,Tt,!1,null,null,null)),zt=Ot.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-pay"},[a("order-header",{attrs:{title:"订单支付"},scopedSlots:t._u([{key:"tip",fn:function(){return[a("span",[t._v("请谨防钓鱼链接诈骗电话")])]},proxy:!0}])}),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"container"},[a("div",{staticClass:"order-wrap"},[a("div",{staticClass:"item-order"},[a("div",{staticClass:"icon-succ"}),a("div",{staticClass:"order-info"},[a("h2",[t._v("订单提交成功！去付款咯～")]),t._m(0),a("p",[t._v("收货信息："+t._s(t.addressInfo))])]),a("div",{staticClass:"order-total"},[a("p",[t._v("应付总额："),a("span",[t._v(t._s(t.payment))]),t._v("元")]),a("p",[t._v("订单详情"),a("em",{staticClass:"icon-down",class:{up:t.showDetail},on:{click:function(e){t.showDetail=!t.showDetail}}})])])]),t.showDetail?a("div",{staticClass:"item-detail"},[a("div",{staticClass:"item"},[a("div",{staticClass:"detail-title"},[t._v("订单号：")]),a("div",{staticClass:"detail-info theme-color"},[t._v(t._s(t.orderId))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"detail-title"},[t._v("收货信息：")]),a("div",{staticClass:"detail-info"},[t._v(t._s(t.addressInfo))])]),a("div",{staticClass:"item good"},[a("div",{staticClass:"detail-title"},[t._v("商品名称：")]),a("div",{staticClass:"detail-info"},[a("ul",t._l(t.orderDetail,(function(e,s){return a("li",{key:s},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productImage,expression:"item.productImage"}]}),t._v(t._s(e.productName)+" ")])})),0)])]),t._m(1)]):t._e()]),a("div",{staticClass:"item-pay"},[a("h3",[t._v("选择以下支付方式付款")]),a("div",{staticClass:"pay-way"},[a("p",[t._v("支付平台")]),a("div",{staticClass:"pay pay-ali",class:{checked:1===t.payType},on:{click:function(e){return t.paySubmit(1)}}}),a("div",{staticClass:"pay pay-wechat",class:{checked:2===t.payType},on:{click:function(e){return t.paySubmit(2)}}})])])])]),t.showPay?a("scan-pay-code",{attrs:{img:t.payImg},on:{close:t.closePayModal}}):t._e(),a("modal",{attrs:{title:"支付确认",btnType:"3",showModal:t.showPayModal,sureText:"查看订单",cancelText:"未支付"},on:{cancel:function(e){t.showPayModal=!1},submit:t.goOrderList},scopedSlots:t._u([{key:"body",fn:function(){return[a("p",[t._v("您是否确认已完成支付？")])]},proxy:!0}])})],1)},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("请在"),a("span",[t._v("30分")]),t._v("内完成支付, 超时后将取消订单")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("div",{staticClass:"detail-title"},[t._v("发票信息：")]),a("div",{staticClass:"detail-info"},[t._v("电子发票 个人")])])}],Dt=(a("99af"),a("d055")),qt=a.n(Dt),Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scan"},[a("div",{staticClass:"mask"}),a("div",{staticClass:"item-wrap"},[a("div",{staticClass:"img-scan"}),a("div",{staticClass:"img-pay"},[a("div",{staticClass:"title"},[t._v("微信支付"),a("em",{on:{click:t.close}})]),a("div",{staticClass:"qrcode"},[a("img",{attrs:{src:t.img}})]),t._m(0)])])])},Bt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tip"},[a("p",[t._v("请使用"),a("span",{staticClass:"theme-color"},[t._v("微信")]),t._v("扫一扫")]),a("p",[t._v("二维码完成支付")])])}],Vt={name:"scan-pay-code",props:["img"],methods:{close:function(){this.$emit("close")}}},Ht=Vt,Rt=(a("757c"),Object(f["a"])(Ht,Ut,Bt,!1,null,null,null)),Zt=Rt.exports,Ft={name:"order-pay",data:function(){return{orderId:this.$route.query.orderId,addressInfo:"",orderDetail:[],showDetail:!1,payType:"",payment:0,showPay:!1,showPayModal:!1,payImg:"",Timer:""}},components:{ScanPayCode:Zt,Modal:L,OrderHeader:Q},mounted:function(){this.getOrderDetail()},methods:{getOrderDetail:function(){var t=this;this.axios.get("/orders/".concat(this.orderId)).then((function(e){var a=e.shippingVo;t.addressInfo="".concat(a.receiverName," ").concat(a.receiverMobile," ").concat(a.receiverProvince," ").concat(a.receiverCity," ").concat(a.receiverDistrict," ").concat(a.receiverAddress),t.orderDetail=e.orderItemVoList,t.payment=e.payment}))},paySubmit:function(t){var e=this;this.payType=t,1==t?window.open("/#/order/alipay?orderId="+this.orderId,"_blank"):this.axios.post("/pay",{orderId:this.orderId,orderName:"Vue 仿小米商城",amount:.01,payType:2}).then((function(t){qt.a.toDataURL(t.content).then((function(t){e.showPay=!0,e.payImg=t,e.loopOrderState()})).catch((function(){e.$message.error("微信二维码生成失败")}))}))},closePayModal:function(){this.showPay=!1,this.showPayModal=!0,clearInterval(this.Timer)},loopOrderState:function(){var t=this;this.Timer=setInterval((function(){t.axios.get("/orders/".concat(t.orderId)).then((function(e){20==e.status&&(clearInterval(t.Timer),t.goOrderList())}))}),1e3)},goOrderList:function(){this.$router.push("/order/list")}}},Jt=Ft,Gt=(a("4a39"),Object(f["a"])(Jt,At,Lt,!1,null,null,null)),Kt=Gt.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("div",{staticClass:"ali-pay"},[a("loading"),a("div",{staticClass:"form",domProps:{innerHTML:t._s(t.content)}})],1):t._e()])},Xt=[],Wt=a("5118"),Yt={name:"ali-pay",components:{Loading:Ct},data:function(){return{orderId:this.$route.query.orderId,content:"",loading:!0}},mounted:function(){this.paySubmit()},methods:{paySubmit:function(){var t=this;this.axios.post("/pay",{orderId:this.orderId,orderName:"Vue 仿小米商城",amount:.01,payType:1}).then((function(e){t.content=e.content,Object(Wt["setTimeout"])((function(){document.forms[0].submit()}),100)}))}}},te=Yt,ee=Object(f["a"])(te,Qt,Xt,!1,null,null,null),ae=ee.exports;n["default"].use(c["a"]);var se=new c["a"]({routes:[{path:"/",name:"home",component:M,redirect:"/index",children:[{path:"/index",name:"index",component:V},{path:"/product/:id",name:"product",component:function(t){return a.e("chunk-983dd1da").then(function(){var e=[a("2320")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/detail/:id",name:"detail",component:function(t){return a.e("chunk-c0ee4194").then(function(){var e=[a("afa2")];t.apply(null,e)}.bind(this)).catch(a.oe)}}]},{path:"/login",name:"login",component:function(t){return a.e("chunk-31ed31e6").then(function(){var e=[a("c6f7")];t.apply(null,e)}.bind(this)).catch(a.oe)}},{path:"/cart",name:"cart",component:tt},{path:"/order",name:"order",component:nt,children:[{path:"list",name:"order-list",component:Nt},{path:"confirm",name:"order-confirm",component:zt},{path:"pay",name:"order-pay",component:Kt},{path:"alipay",name:"alipay",component:ae}]}]}),ie=a("bc3a"),re=a.n(ie),ne=a("a7fe"),ce=a.n(ne),oe=a("caf9"),le=a("00e7"),de=a.n(le),ue={saveUserName:function(t,e){t.username=e},saveCartCount:function(t,e){t.cartCount=e}},ve={saveUserName:function(t,e){t.commit("saveUserName",e)},saveCartCount:function(t,e){t.commit("saveCartCount",e)}};n["default"].use(p["a"]);var pe={username:"",cartCount:0},me=new p["a"].Store({state:pe,mutations:ue,actions:ve}),he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},fe=[],_e={name:"App",data:function(){return{data:""}},components:{},mounted:function(){this.$cookie.get("userId")&&(this.getUser(),this.getCartCount())},methods:{getUser:function(){var t=this;this.axios.get("/user").then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.$store.dispatch("saveUserName",e.username)}))},getCartCount:function(){var t=this;this.axios.get("/carts/products/sum").then((function(e){t.$store.dispatch("saveCartCount",e)}))}}},ge=_e,Ce=(a("5c0b"),Object(f["a"])(ge,he,fe,!1,null,null,null)),ye=Ce.exports;re.a.defaults.baseURL="/api",re.a.defaults.timeout=8e3,re.a.interceptors.response.use((function(t){var e=t.data,a=location.hash;return 0==e.status?e.data:10==e.status?("#/index"!=a&&(window.location.href="/#/login"),Promise.reject(e)):(r.a.warning(e.msg),Promise.reject(e))}),(function(t){var e=t.response;return r.a.error(e.data.message),Promise.reject(t)})),n["default"].use(ce.a,re.a),n["default"].use(de.a),n["default"].component(r.a.name,r.a),n["default"].use(oe["a"],{loading:"/imgs/loading-svg/loading-bars.svg"}),n["default"].prototype.$message=r.a,n["default"].config.productionTip=!1,new n["default"]({store:me,router:se,render:function(t){return t(ye)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"6b4a":function(t,e,a){"use strict";a("511f")},"757c":function(t,e,a){"use strict";a("2441")},"778c":function(t,e,a){"use strict";a("1266")},8099:function(t,e,a){},"8ee7":function(t,e,a){"use strict";a("e8ec")},"984c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"service"},[a("div",{staticClass:"container"},[a("ul",[a("li",[a("span",{staticClass:"icon-setting"}),t._v("预约维修服务")]),a("li",[a("span",{staticClass:"icon-7day"}),t._v("7天无理由退货")]),a("li",[a("span",{staticClass:"icon-15day"}),t._v("15天免费换货")]),a("li",[a("span",{staticClass:"icon-post"}),t._v("满150元包邮")])])])])}],r={name:"service-bar"},n=r,c=(a("072c"),a("2877")),o=Object(c["a"])(n,s,i,!1,null,"7a3b08ba",null);e["a"]=o.exports},"9c0c":function(t,e,a){},b313:function(t,e,a){},cb13:function(t,e,a){"use strict";a("f314")},e00f:function(t,e,a){},e24c:function(t,e,a){"use strict";a("b313")},e8ec:function(t,e,a){},e96f:function(t,e,a){},eaee:function(t,e,a){"use strict";a("f31d")},f314:function(t,e,a){},f31d:function(t,e,a){},fad4:function(t,e,a){"use strict";a("8099")}});